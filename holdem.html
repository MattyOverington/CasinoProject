<!doctype html>
    <html>
        <head>
            <meta charset="UTF-8">
            <title>Texas Holdem'</title>
            <link rel="stylesheet" type="text/css" href="mystrap.css">
            <script type="text/javascript" src="pixi.js"></script>
        </head>

        <body>

        <canvas id="holdem_canvas"></canvas>

            <script>

//-----------------------------------------------------------------------------------------------------
//Initialization & Global Variables
//-----------------------------------------------------------------------------------------------------

var canvas;
var context;
var card_img = new Image();
card_img.src = "cards.gif";

var card_height = 384 / 4;
var card_width = 923 / 13;
//var renderer;
//var stage; 

initCanvas();


var game = new Game(4, 400, 0, 0, 0);
game.createDeck();
console.log(game.deck)

renderCard(game.deck[13], 400, 400);




//-----------------------------------------------------------------------------------------------------
//Constructors
//-----------------------------------------------------------------------------------------------------

//Game Constructor

function Game (numberOfPlayers, initialCash, initialSmallBlind, blindRaiseInterval, blindRaisePercentage) {
    this.numberOfPlayers = numberOfPlayers;
    this.roundNum = 0;
    this.initialCash = initialCash;
    this.initialSmallBlind = initialSmallBlind;
    this.blindRaiseInterval = blindRaiseInterval;
    this.blindRaisePercentage = blindRaisePercentage;
    this.players;
    this.deck = [];

    this.createDeck = function() {
        suits = ["D", "H", "C", "S"];

        for (i = 0; i < 4; i++) {
            for (j = 1; j <= 13; j++) {
                temp = new Card;
                temp.suit = suits[i];
                temp.number = j;
                this.deck.push(temp);
            }
        }
    }

    this.dealCard = function(player) {
        i = Math.floor((Math.random() * 52) + 1) - 1;

        game.temp = deck[i];
        deck.splice(i, 1);
        player.currentHand.push(temp);
    }

    this.shuffleDeck = function() {
        for(var j, x, i; i = deck.length; j = Math.floor(Math.random() * i), x = deck[i--], deck[i] = deck[j], deck[j] = x);  
    }

}

//Card Constructor

function Card (suit, number) {
    this.suit = suit;
    this.number = number;
}

//Player Constructor

function Player (number, colour, name) {
    this.number = number;
    this.colour = colour;
    this.name = name;
    this.balance = 0;
    this.rank = -1;
    this.currentHand = [];
}

//-----------------------------------------------------------------------------------------------------
//Canvas & Pixi Methods
//-----------------------------------------------------------------------------------------------------

function initCanvas() {
    canvas = document.getElementById("holdem_canvas");
    canvas.height = window.innerHeight;     
    canvas.width = window.innerWidth;
    context = canvas.getContext("2d");
}

function initPixi() {
    renderer =  new PIXI.CanvasRenderer(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.view);
    stage = new PIXI.Container();

}


//-----------------------------------------------------------------------------------------------------
//Rendering Methods
//-----------------------------------------------------------------------------------------------------

function renderCard(card, x, y) {
    suits = ["D", "H", "C", "S"];

    row = suits.indexOf(card.suit);
    column = card.number - 1;

    pixelsLeft = card_width * column;
    pixelsTop = card_height * row;

    console.log(pixelsLeft, pixelsTop);
    console.log(card_width, card_height);

    card_img.onload = function() {
        context.drawImage(card_img, pixelsLeft, pixelsTop, card_width, card_height, x, y, card_width, card_height);
    }
}


            </script>

        </body>
    </html>
